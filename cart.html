<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Your Cart - Sree Vastram</title>
  <link rel="stylesheet" href="style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Ga+Maamli&display=swap"
      rel="stylesheet"/>
      
  <style>
    /* Inline styles only for cart page specifics (keeps main theme intact) */
    :root{
      --brand:#b30059;
      --accent:#ff4081;
      --muted:#777;
      --card-bg:#fff;
      --page-bg:#fffafc;
    }
    body{
      margin:0;
      font-family: Arial, sans-serif;
      background: var(--page-bg);
      color:#222;
    }

    /* navbar (keeps same look as your site) */
    .navbar {
  position: fixed;
  top: 0;
  width: 100%;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem 3rem;
  background: rgba(49, 3, 33, 0.755); /* Transparent initially */
  box-shadow: none;
  z-index: 100;
  transition: all 0.4s ease;
}

/* Navbar when scrolling */
.navbar.scrolled {
  background: linear-gradient(
    90deg,
    #ff758c,
    #ff7eb3
  ); /* Gradient color on scroll */
  box-shadow: 0 5px 20px rgba(18, 1, 1, 0.3);
}
    .logo {
  font-size: 2.5rem;
  font-weight: bold;
  color: #fff;
  text-shadow: 1px 1px 5px rgba(0, 0, 0, 0.3);
  font-family: "Ga Maamli", sans-serif;
  font-weight: 400;
  font-style: normal;
}

    .nav-icons{ display:flex; gap:10px; align-items:center; }
    .nav-icons .cart-btn { background: rgba(255,255,255,0.9); border:none; padding:8px 12px; border-radius:20px; cursor:pointer; }
    .page-wrap { padding:100px 16px 40px; max-width:1100px; margin:0 auto; }

    .heading {
      text-align:center;
      color:var(--brand);
      margin-bottom:18px;
      font-size:24px;
    }

    .cart-layout {
      display:flex;
      gap:24px;
      align-items:flex-start;
      flex-wrap:wrap;
    }

    /* left column (items) */
    .cart-items {
      flex:1 1 620px;
      min-width:280px;
      background:var(--card-bg);
      border-radius:12px;
      padding:16px;
      box-shadow:0 6px 18px rgba(0,0,0,0.06);
    }

    .cart-item {
      display:flex;
      gap:14px;
      align-items:center;
      padding:12px 6px;
      border-bottom:1px solid #f0f0f0;
      flex-wrap:wrap;
    }

    .cart-item:last-child { border-bottom:none; }

    .item-thumb{
      width:110px;
      height:110px;
      border-radius:8px;
      object-fit:cover;
      flex:0 0 110px;
    }

    .item-info{ flex:1 1 200px; min-width:150px; }
    .item-info h4{ margin:0 0 6px; color:var(--brand); font-size:16px; }
    .item-info p{ margin:4px 0; color:var(--muted); font-size:14px; }

    .sku { font-size:13px; color:#555; margin-top:6px; }

    /* actions: qty + remove */
    .item-actions {
      display:flex;
      gap:10px;
      align-items:center;
      flex:0 0 170px;
      justify-content:flex-end;
      min-width:140px;
    }

    .qty-control {
      display:inline-flex;
      border:1px solid #e6e6e6;
      border-radius:8px;
      overflow:hidden;
      align-items:center;
    }
    .qty-control button{
      background:#fff;
      border:none;
      padding:8px 10px;
      cursor:pointer;
    }
    .qty-control span{
      display:inline-block;
      width:34px;
      text-align:center;
      font-weight:600;
    }

    .remove-btn{
      background:transparent;
      border:1px solid #eee;
      padding:6px 10px;
      cursor:pointer;
      color:#b30059;
      border-radius:8px;
      font-size:13px;
    }

    /* right column (summary) */
    .summary {
      width:320px;
      min-width:260px;
      background:var(--card-bg);
      border-radius:12px;
      padding:18px;
      box-shadow:0 6px 18px rgba(0,0,0,0.06);
      height:fit-content;
    }

    .summary h3 { margin:0 0 12px; color:var(--brand); }
    .summary .row{ display:flex; justify-content:space-between; margin:8px 0; color:#333; }
    .summary .total { font-weight:700; font-size:20px; margin-top:12px; color:#111; text-align:right; }
    .summary .btn{
      display:block;
      width:100%;
      padding:12px;
      border:none;
      border-radius:8px;
      cursor:pointer;
      margin-top:12px;
      font-size:16px;
    }
    .buy-btn{ background:var(--brand); color:#fff; }
    .btn-continue{ background:var(--accent); color:#fff; }

    .empty-cart{
      text-align:center;
      padding:40px 10px;
      color:var(--muted);
    }

    /* small screens */
    @media (max-width:900px){
      .cart-layout{ flex-direction:column-reverse; gap:16px; }
      .summary{ width:100%; }
      .item-actions{ justify-content:flex-start; }
      .nav-icons .cart-count{ display:none; }
    }

  </style>
</head>
<body>

  <!-- NAVBAR (keeps same look) -->
  <header class="navbar">
    <div class="logo">Sree Vastram</div>
    <nav>
    <ul class="nav-links" >
      <li><a href="index.html">Home</a></li>
      <li><a href="cotton.html">Cotton suits</a></li>
      <li><a href="saree.html">Sarees</a></li>
      <li><a href="homedecor.html">Home Decor</a></li>
      
    </ul>
  </nav>
    <div class="nav-icons">
      
      <button class="cart-btn" onclick="location.href='cart.html'">ðŸ›’ Cart <span id="cart-count" style="margin-left:8px;color:#b30059;font-weight:700"></span></button>
    </div>
    <div class="hamburger">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </div>
  </header>

  <main class="page-wrap">
    <h2 class="heading">ðŸ›’ Your Shopping Cart</h2>

    <div class="cart-layout">
      <section class="cart-items" id="cartItems">
        <!-- items will be rendered here -->
      </section>

      <aside class="summary" id="summaryBox">
        <h3>Order Summary</h3>
        <div id="summaryLines"></div>
        <div class="total" id="cartTotal">Total: â‚¹0</div>
        <button class="buy-btn" id="buyNowBtn">Buy Now âš¡</button>


        <!-- <button class="btn btn-checkout" id="buyNowBtn">Buy Now</button> -->
        <button class="btn btn-continue" id="clearCartBtn">Clear Cart</button>
        <button class="btn btn-continue" onclick="location.href='index.html'">Continue Shopping</button>

      </aside>
    </div>
  </main>

  <script>
  const cartKey = "cart";

  // Read cart
  function readCart() {
    try {
      const raw = localStorage.getItem(cartKey);
      return raw ? JSON.parse(raw) : [];
    } catch (e) {
      return [];
    }
  }

  function saveCart(cart) {
    localStorage.setItem(cartKey, JSON.stringify(cart));
    updateCartCount();
  }

  // Cart count in navbar
  function updateCartCount() {
    const cart = readCart();
    const count = cart.reduce((s, i) => s + (i.quantity || 1), 0);
    document.getElementById("cart-count").textContent = count ? `(${count})` : "";
  }

  // Render cart items
  function renderCart() {
    const container = document.getElementById("cartItems");
    const summaryLines = document.getElementById("summaryLines");

    container.innerHTML = "";
    summaryLines.innerHTML = "";

    const cart = readCart();

    if (!cart.length) {
      container.innerHTML = `<div class="empty-cart">Your cart is empty.<br/>Add items and they'll appear here.</div>`;
      document.getElementById("cartTotal").textContent = "Total: â‚¹0";
      return;
    }

    let total = 0;

    cart.forEach((item, idx) => {
      item.quantity = item.quantity || 1;
      const itemTotal = (Number(item.price) || 0) * item.quantity;
      total += itemTotal;

      const el = document.createElement("div");
      el.className = "cart-item";
      el.innerHTML = `
        <img class="item-thumb" src="${item.image || item.img}" alt="${escapeHtml(item.name)}" />
        <div class="item-info">
          <h4>${escapeHtml(item.name)}</h4>
          <p class="sku">Color: <strong>${escapeHtml(item.color || "-")}</strong> â€¢ Size: <strong>${escapeHtml(item.size || "-")}</strong></p>
          <p>Price: â‚¹${item.price}</p>
        </div>

        <div class="item-actions">
          <div class="qty-control">
            <button onclick="changeQty(${idx}, -1)">âˆ’</button>
            <span id="qty-${idx}">${item.quantity}</span>
            <button onclick="changeQty(${idx}, 1)">+</button>
          </div>
          <button class="remove-btn" onclick="removeItem(${idx})">Remove</button>
        </div>
      `;
      container.appendChild(el);
    });

    summaryLines.innerHTML = `
      <div class="row"><span>Items (${cart.length})</span><span>â‚¹${total}</span></div>
      <div class="row"><span>Shipping</span><span>Calculated at checkout</span></div>
    `;

    document.getElementById("cartTotal").textContent = `Total: â‚¹${total}`;

    saveCart(cart);
  }

  function changeQty(index, delta) {
    const cart = readCart();
    if (!cart[index]) return;

    cart[index].quantity = (cart[index].quantity || 1) + delta;
    if (cart[index].quantity < 1) cart[index].quantity = 1;

    saveCart(cart);
    renderCart();
  }

  function removeItem(index) {
    const cart = readCart();
    cart.splice(index, 1);
    saveCart(cart);
    renderCart();
  }

  function clearCart() {
    if (!confirm("Clear all items from cart?")) return;
    localStorage.removeItem(cartKey);
    renderCart();
  }

  // FIXED: Save order data before redirecting
  function checkout() {
    const cart = readCart();
    if (!cart.length) {
      alert("Your cart is empty.");
      return;
    }

    // Save data for order.html
    localStorage.setItem(
      "orderItem",
      JSON.stringify({
        name: cart.map(i => `${i.name} (x${i.quantity})`).join(", "),
        color: cart.map(i => i.color || "-").join(", "),
        size: cart.map(i => i.size || "-").join(", "),
        price: cart.reduce((sum, i) => sum + i.price * i.quantity, 0)
      })
    );

    // Redirect to order page
    window.location.href = "order.html";
  }

  // HTML escape
  function escapeHtml(str) {
    return String(str || "")
      .replace(/&/g, "&amp;")
      .replace(/</g, "&lt;")
      .replace(/>/g, "&gt;")
      .replace(/"/g, "&quot;")
      .replace(/'/g, "&#039;");
  }

  // Buttons
  document.getElementById("clearCartBtn").addEventListener("click", clearCart);
  document.getElementById("buyNowBtn").addEventListener("click", checkout);

  updateCartCount();
  renderCart();

  // Hamburger menu
  const hamburger = document.querySelector(".hamburger");
  const navLinks = document.querySelector(".nav-links");

  hamburger.addEventListener("click", () => {
    navLinks.classList.toggle("active");
    hamburger.classList.toggle("toggle");
  });
</script>

</body>
</html>
